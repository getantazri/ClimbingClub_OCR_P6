<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
        "http://struts.apache.org/dtds/struts-2.5.dtd">

<struts>
    <package name="cclub-default" extends="struts-default" namespace="/">
        <!-- Action INDEX par dÃ©faut -->
        <default-action-ref name="index" />
        <action name="index">
            <result>/WEB-INF/jsp/index.jsp</result>
        </action>

    </package>

    <package name="topos" extends="cclub-default" namespace="/topos">
        <!-- Action TOPOS LIST -->
        <action name="doToposList"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doListAllTopos">

            <result>/WEB-INF/jsp/topos/topos.jsp</result>
        </action>

        <!-- Action TOPO DETAILS -->
        <action name="doTopoDetails"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doTopoDetails">
            <result name="success">/WEB-INF/jsp/topos/topo.jsp</result>
            <result name="error">/WEB-INF/jsp/topos/topos.jsp</result>

            <interceptor-ref name="store">
                <param name="operationMode">RETRIEVE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

        </action>

        <!-- Action ADD TOPO -->
        <action name="doAddTopo"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doAddTopo">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/topos/add_topo.jsp</result>
            <result name="success" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topo.topoId}</param>
            </result>
            <result name="error">/WEB-INF/jsp/topos/add_topo.jsp</result>
        </action>

        <!-- Action UPDATE TOPO -->
        <action name="doGetTopoToUpdate"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doGetTopoToUpdate">
            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/topos/update_topo.jsp</result>
            <result name="error" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topo.topoId}</param>
            </result>

        </action>

        <action name="doUpdateTopo"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doUpdateTopo">
            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/topos/update_topo.jsp</result>
            <result name="success" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topo.topoId}</param>
            </result>
            <result name="error" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topo.topoId}</param>
            </result>
        </action>

        <!-- Action UPDATE TOPO -->
        <action name="doDeleteTopo"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doDeleteTopo">
            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/topos/topo.jsp</result>
            <result name="success" type="redirectAction">
                <param name="actionName">doListAllTopos</param>
                <param name="topoId">${topo.topoId}</param>
            </result>
            <result name="error">/WEB-INF/jsp/topos/topos.jsp</result>
        </action>
    </package>

    <package name="regions" extends="cclub-default" namespace="/regions">
        <!-- Action EN REGION page access -->
        <action name="doRegions">
            <result>/WEB-INF/jsp/regions/regions.jsp</result>
        </action>
        <!-- Action REGIONS LIST -->
        <action name="doRegionDetails">
        </action>

        <!-- Action REGIONS LIST -->
        <action name="doRegionsList"
                class="com.antazri.climbingclub.webapp.action.NavigationAction"
                method="doRegionsList">

        </action>
    </package>

    <package name="public" extends="cclub-default" namespace="/login">
        <action name="login">
            <result>/WEB-INF/jsp/login.jsp</result>
        </action>
        <action name="logout">
            <result type="redirectAction">/login/login</result>
        </action>
    </package>

    <package name="user" extends="public" namespace="/compte">
        <action name="compte">
            <result>/WEB-INF/jsp/user/compte.jsp</result>
            <result name="error" type="redirectAction">/login/login</result>
        </action>
    </package>

    <package name="admin" extends="user" namespace="/admin">
        <action name="admin">
            <result>/WEB-INF/jsp/admin/</result>
            <result name="error" type="redirectAction">/login/login</result>
        </action>
    </package>
</struts>