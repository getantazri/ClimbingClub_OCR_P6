<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
        "http://struts.apache.org/dtds/struts-2.5.dtd">

<struts>
    <!-- =============================================================== -->
    <!-- Package CCLUB DEFAULT -->
    <!-- =============================================================== -->
    <package name="cclub-default" extends="struts-default" namespace="/">
        <!-- Action INDEX par dÃ©faut -->
        <default-action-ref name="index" />
        <action name="index">
            <result>/WEB-INF/jsp/index.jsp</result>
        </action>

        <action name="error">
            <interceptor-ref name="store">
                <param name="operationMode">RETRIEVE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />
            <result>/WEB-INF/jsp/error.jsp</result>
        </action>

        <!-- Action POST SPOT COMMENT -->
        <action name="doPostSpotCommentaire"
                class="com.antazri.climbingclub.webapp.action.CommenterAction"
                method="doPostSpotCommentaire">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input" type="redirectAction">
                <param name="actionName">doSpotDetails</param>
                <param name="spotId">${spotId}</param>
            </result>
            <result name="success" type="redirectAction">
                <param name="actionName">doSpotDetails</param>
                <param name="spotId">${spotId}</param>
            </result>
            <result name="error" type="redirectAction">
                <param name="actionName">doSpotDetails</param>
                <param name="spotId">${spotId}</param>
            </result>
        </action>

        <!-- Action POST TOPO COMMENT -->
        <action name="doPostTopoCommentaire"
                class="com.antazri.climbingclub.webapp.action.CommenterAction"
                method="doPostTopoCommentaire">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topoId}</param>
            </result>
            <result name="success" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topoId}</param>
            </result>
            <result name="error" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topoId}</param>
            </result>
        </action>

        <!-- Action GET COMMENTAIRE TO EDIT -->
        <action name="doGetCommentaireToEdit"
                class="com.antazri.climbingclub.webapp.action.CommenterAction"
                method="doGetCommentaireToEdit">
            <result name="input">/WEB-INF/jsp/edit_commentaire.jsp</result>
            <result name="success">/WEB-INF/jsp/edit_commentaire.jsp</result>
            <result name="error" type="redirect">error.action</result>
        </action>

        <!-- Action EDIT SPOT COMMENTAIRE -->
        <action name="doEditSpotCommentaire"
                class="com.antazri.climbingclub.webapp.action.CommenterAction"
                method="doEditSpotCommentaire">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input" type="redirectAction">
                <param name="actionName">doSpotDetails</param>
                <param name="spotId">${spotId}</param>
            </result>
            <result name="success" type="redirectAction">
                <param name="actionName">doSpotDetails</param>
                <param name="spotId">${spotId}</param>
            </result>
            <result name="error" type="redirectAction">
                <param name="actionName">doSpotDetails</param>
                <param name="spotId">${spotId}</param>
            </result>
        </action>

        <!-- Action EDIT TOPO COMMENTAIRE -->
        <action name="doEditTopoCommentaire"
                class="com.antazri.climbingclub.webapp.action.CommenterAction"
                method="doEditTopoCommentaire">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topoId}</param>
            </result>
            <result name="success" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topoId}</param>
            </result>
            <result name="error" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topoId}</param>
            </result>
        </action>

        <!-- Action DELETE COMMENTAIRE -->
        <action name="doDeleteCommentaire"
                class="com.antazri.climbingclub.webapp.action.CommenterAction"
                method="doDeleteCommentaire">

            <result name="success" type="redirect">/compte/doGetCompte.action</result>
            <result name="error" type="redirect">error.action</result>
        </action>
    </package>

    <!-- =============================================================== -->
    <!-- Package TOPOS -->
    <!-- =============================================================== -->
    <package name="topos" extends="cclub-default" namespace="/topos">
        <!-- Action TOPOS LIST -->
        <action name="doToposList"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doListAllTopos">

            <result>/WEB-INF/jsp/topos/topos.jsp</result>
        </action>

        <!-- Action TOPO DETAILS -->
        <action name="doTopoDetails"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doTopoDetails">

            <result name="success">/WEB-INF/jsp/topos/topo.jsp</result>
            <result name="error">/WEB-INF/jsp/error.jsp</result>

        </action>

        <!-- Action ADD TOPO -->
        <action name="doAddTopo"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doAddTopo">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/topos/add_topo.jsp</result>
            <result name="success" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topo.topoId}</param>
            </result>
            <result name="error">/WEB-INF/jsp/topos/add_topo.jsp</result>
        </action>

        <!-- Action UPDATE TOPO -->
        <action name="doGetTopoToUpdate"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doGetTopoToUpdate">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/topos/update_topo.jsp</result>
            <result name="error" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topo.topoId}</param>
            </result>

        </action>

        <action name="doUpdateTopo"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doUpdateTopo">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/topos/update_topo.jsp</result>
            <result name="success" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topo.topoId}</param>
            </result>
            <result name="error" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topo.topoId}</param>
            </result>
        </action>

        <!-- Action DELETE TOPO -->
        <action name="doDeleteTopo"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doDeleteTopo">

            <result name="success" type="redirect">/compte/doGetCompte.action</result>
            <result name="error" type="redirect">/compte/doGetCompte.action</result>
        </action>
    </package>

    <!-- =============================================================== -->
    <!-- Package SPOTS -->
    <!-- =============================================================== -->
    <package name="spots" extends="cclub-default" namespace="/spots">
        <!-- Action SPOT DETAILS -->
        <action name="doSpotDetails"
                class="com.antazri.climbingclub.webapp.action.GestionSpotAction"
                method="doSpotDetails">

            <result name="success">/WEB-INF/jsp/spots/spot.jsp</result>
            <result name="error">/WEB-INF/jsp/error.jsp</result>
        </action>

        <!-- Action ADD SPOT -->
        <action name="doAddSpot"
                class="com.antazri.climbingclub.webapp.action.GestionSpotAction"
                method="doAddSpot">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/spots/add_spot.jsp</result>
            <result name="success" type="redirectAction">
                <param name="actionName">doSpotDetails</param>
                <param name="spotId">${spot.spotId}</param>
                <param name="topoId">${topoId}</param>
            </result>
            <result name="error">/WEB-INF/jsp/spots/add_spot.jsp</result>
        </action>

        <!-- Action GET SPOT TO UPDATE -->
        <action name="doGetSpotToUpdate"
                class="com.antazri.climbingclub.webapp.action.GestionSpotAction"
                method="doGetSpotToUpdate">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/spots/update_spot.jsp</result>
            <result name="error" type="redirectAction">
                <param name="actionName">doSpotDetails</param>
                <param name="spotId">${spot.spotId}</param>
                <param name="topoId">${topoId}</param>
            </result>
        </action>

        <!-- Action UPDATE SPOT -->
        <action name="doUpdateSpot"
                class="com.antazri.climbingclub.webapp.action.GestionSpotAction"
                method="doUpdateSpot">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/spots/update_spot.jsp</result>
            <result name="success" type="redirectAction">
                <param name="actionName">doSpotDetails</param>
                <param name="spotId">${spot.spotId}</param>
                <param name="topoId">${topo.topoId}</param>
            </result>
            <result name="error" type="redirectAction">
                <param name="actionName">doSpotDetails</param>
                <param name="spotId">${spot.spotId}</param>
                <param name="topoId">${topo.topoId}</param>
            </result>
        </action>

        <!-- Action DELETE SPOT -->
        <action name="doDeleteSpot"
                class="com.antazri.climbingclub.webapp.action.GestionSpotAction"
                method="doDeleteSpot">

            <result name="success" type="redirect">/compte/doGetCompte.action</result>
            <result name="error" type="redirect">/compte/doGetCompte.action</result>
        </action>
    </package>

    <!-- =============================================================== -->
    <!-- Package SECTEURS -->
    <!-- =============================================================== -->
    <package name="secteurs" extends="cclub-default" namespace="/secteurs">
        <!-- Action SECTEUR DETAILS -->
        <action name="doSecteurDetails"
                class="com.antazri.climbingclub.webapp.action.GestionSecteurAction"
                method="doSecteurDetails">

            <result name="success">/WEB-INF/jsp/secteurs/secteur.jsp</result>
            <result name="error">/WEB-INF/jsp/error.jsp</result>
        </action>

        <!-- Action ADD SECTEUR -->
        <action name="doAddSecteur"
                class="com.antazri.climbingclub.webapp.action.GestionSecteurAction"
                method="doAddSecteur">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/secteurs/add_secteur.jsp</result>
            <result name="success" type="redirectAction">
                <param name="actionName">doSecteurDetails</param>
                <param name="secteur.secteurId">${secteur.secteurId}</param>
            </result>
            <result name="error">/WEB-INF/jsp/secteurs/add_secteur.jsp</result>
        </action>

        <!-- Action GET SECTEUR TO UPDATE -->
        <action name="doGetSecteurToUpdate"
                class="com.antazri.climbingclub.webapp.action.GestionSecteurAction"
                method="doGetSecteurToUpdate">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/secteurs/update_secteur.jsp</result>
            <result name="error" type="redirectAction">
                <param name="actionName">doSecteurDetails</param>
                <param name="secteur.secteurId">${secteur.secteurId}</param>
            </result>
        </action>

        <!-- Action UPDATE SECTEUR -->
        <action name="doUpdateSecteur"
                class="com.antazri.climbingclub.webapp.action.GestionSecteurAction"
                method="doUpdateSecteur">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/secteurs/update_secteur.jsp</result>
            <result name="success" type="redirectAction">
                <param name="actionName">doSecteurDetails</param>
                <param name="secteur.secteurId">${secteur.secteurId}</param>
            </result>
            <result name="error" type="redirectAction">
                <param name="actionName">doSecteurDetails</param>
                <param name="secteur.secteurId">${secteur.secteurId}</param>
            </result>
        </action>

        <!-- Action DELETE SECTEUR -->
        <action name="doDeleteSecteur"
                class="com.antazri.climbingclub.webapp.action.GestionSecteurAction"
                method="doDeleteSecteur">

            <result name="success" type="redirect">/compte/doGetCompte.action</result>
            <result name="error" type="redirect">/compte/doGetCompte.action</result>
        </action>
    </package>

    <!-- =============================================================== -->
    <!-- Package VOIES -->
    <!-- =============================================================== -->
    <package name="voies" extends="cclub-default" namespace="/voies">
        <!-- Action VOIE DETAILS -->
        <action name="doVoieDetails"
                class="com.antazri.climbingclub.webapp.action.GestionVoieAction"
                method="doVoieDetails">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="success">/WEB-INF/jsp/voies/voie.jsp</result>
            <result name="error">/WEB-INF/jsp/error.jsp</result>
        </action>

        <!-- Action ADD VOIE -->
        <action name="doAddVoie"
                class="com.antazri.climbingclub.webapp.action.GestionVoieAction"
                method="doAddVoie">

            <result name="input">/WEB-INF/jsp/voies/add_voie.jsp</result>
            <result name="success" type="redirectAction">
                <param name="actionName">doVoieDetails</param>
                <param name="voieId">${voie.voieId}</param>
            </result>
            <result name="error">/WEB-INF/jsp/voies/add_voie.jsp</result>
        </action>

        <!-- Action GET VOIE TO UPDATE -->
        <action name="doGetVoieToUpdate"
                class="com.antazri.climbingclub.webapp.action.GestionVoieAction"
                method="doGetVoieToUpdate">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/voies/update_voie.jsp</result>
            <result name="success">/WEB-INF/jsp/voies/update_voie.jsp</result>
            <result name="error" type="redirectAction">
                <param name="actionName">doVoieDetails</param>
                <param name="voieId">${voie.voieId}</param>
            </result>
        </action>

        <!-- Action UPDATE VOIE -->
        <action name="doUpdateVoie"
                class="com.antazri.climbingclub.webapp.action.GestionVoieAction"
                method="doUpdateVoie">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/voies/update_voie.jsp</result>
            <result name="success" type="redirectAction">
                <param name="actionName">doVoieDetails</param>
                <param name="voieId">${voie.voieId}</param>
            </result>
            <result name="error" type="redirectAction">
                <param name="actionName">doVoieDetails</param>
                <param name="voieId">${voie.voieId}</param>
            </result>
        </action>

        <!-- Action DELETE VOIE -->
        <action name="doDeleteVoie"
                class="com.antazri.climbingclub.webapp.action.GestionVoieAction"
                method="doDeleteVoie">

            <result name="success" type="redirect">/compte/doGetCompte.action</result>
            <result name="error" type="redirect">/compte/doGetCompte.action</result>
        </action>
    </package>

    <!-- =============================================================== -->
    <!-- Package REGIONS -->
    <!-- =============================================================== -->
    <package name="regions" extends="cclub-default" namespace="/regions">
        <!-- Action EN REGION page access -->
        <action name="doRegions">
            <result>/WEB-INF/jsp/regions/regions.jsp</result>
        </action>

        <!-- Action REGION DETAILS -->
        <action name="doRegionDetails"
                class="com.antazri.climbingclub.webapp.action.RegionAction"
                method="doRegionDetails">

            <result name="success">/WEB-INF/jsp/regions/region.jsp</result>
            <result name="error">/WEB-INF/jsp/regions/regions.jsp</result>
        </action>

    </package>

    <!-- =============================================================== -->
    <!-- Package SEARCH -->
    <!-- =============================================================== -->
    <package name="search" extends="cclub-default" namespace="/search">
        <!-- Action DO SEARCH -->
        <action name="doSearch"
                class="com.antazri.climbingclub.webapp.action.MoteurRechercheAction"
                method="doSearch">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/search.jsp</result>
            <result name="success">/WEB-INF/jsp/search.jsp</result>
            <result name="error">/WEB-INF/jsp/search.jsp</result>
        </action>

        <!-- Action SEARCH REQUEST -->
        <action name="doSearchRequest"
                class="com.antazri.climbingclub.webapp.action.MoteurRechercheAction"
                method="doSearchRequest">

            <interceptor-ref name="store">
                <param name="operationMode">RETRIEVE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">
                <param name="location">/WEB-INF/jsp/search_results.jsp</param>
                <param name="resultatRecherche">${resultatRecherche}</param>
            </result>
            <result name="success">/WEB-INF/jsp/search_results.jsp</result>
            <result name="error">/WEB-INF/jsp/search_results.jsp</result>
        </action>
    </package>

    <!-- =============================================================== -->
    <!-- Package RESERVATIONS -->
    <!-- =============================================================== -->
    <package name="reservations" extends="cclub-default" namespace="/reservations">
        <!-- Action GET RSERVATIONS -->
        <action name="doReservations">
            <result>/WEB-INF/jsp/reservations/reservations.jsp</result>
        </action>
    </package>

    <!-- =============================================================== -->
    <!-- Package PUBLIC -->
    <!-- =============================================================== -->
    <package name="public" extends="cclub-default" namespace="/login">
        <!-- Action LOGIN -->
        <action name="doLogin"
                class="com.antazri.climbingclub.webapp.action.LoginAction"
                method="doLogin">
            <result name="input">/WEB-INF/jsp/login.jsp</result>
            <result name="success" type="redirect">/compte/doGetCompte.action</result>
            <result name="error">/WEB-INF/jsp/login.jsp</result>
        </action>

        <!-- Action LOGOUT -->
        <action name="doLogout"
                class="com.antazri.climbingclub.webapp.action.LoginAction"
                method="doLogout">
            <result type="redirectAction">/login/doLogin</result>
        </action>

        <!-- Action INSCRIPTION -->
        <action name="doGetInscription"
                class="com.antazri.climbingclub.webapp.action.CompteUtilisateurAction"
                method="doGetInscription">
            <result name="success">/WEB-INF/jsp/inscription.jsp</result>
        </action>

        <action name="doInscription"
                class="com.antazri.climbingclub.webapp.action.CompteUtilisateurAction"
                method="doInscription">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="success" type="redirectAction">/compte/doGetCompte</result>
            <result name="error">/WEB-INF/jsp/inscription.jsp</result>
        </action>
    </package>

    <!-- =============================================================== -->
    <!-- Package USER -->
    <!-- =============================================================== -->
    <package name="user" extends="public" namespace="/compte">
        <!-- Action ACCES COMPTE -->
        <action name="doGetCompte"
                class="com.antazri.climbingclub.webapp.action.LoginAction"
                method="doGetCompte">

            <interceptor-ref name="store">
                <param name="operationMode">RETRIEVE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/user/compte.jsp</result>
            <result name="success">/WEB-INF/jsp/user/compte.jsp</result>
            <result name="error" type="redirectAction">/login/doLogin</result>
        </action>

        <!-- Action EDIT PROFILE -->
        <action name="doEditProfile"
                class="com.antazri.climbingclub.webapp.action.CompteUtilisateurAction"
                method="doEditProfile">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">
                <param name="location">/WEB-INF/jsp/user/edit_profile.jsp</param>
                <param name="utilisateurId">${utilisateurId}</param>
            </result>
            <result name="success" type="redirect">doGetCompte.action</result>
            <result name="error" type="redirectAction">
                <param name="actionName">error</param>
            </result>
        </action>

        <!-- Action UPDATE PROFILE -->
        <action name="doUpdateProfile"
                class="com.antazri.climbingclub.webapp.action.CompteUtilisateurAction"
                method="doUpdateProfile">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/user/edit_profile.jsp</result>
            <result name="success" type="redirect">doGetCompte.action</result>
            <result name="error" type="redirect">doGetCompte.action</result>
        </action>

        <!-- Action EDIT PASSWORD -->
        <action name="doEditPassword"
                class="com.antazri.climbingclub.webapp.action.CompteUtilisateurAction"
                method="doEditPassword">
            <result name="input">
                <param name="location">/WEB-INF/jsp/user/edit_password.jsp</param>
                <param name="utilisateurId">${utilisateurId}</param>
            </result>
            <result name="success" type="redirect">doGetCompte.action</result>
            <result name="error" type="redirect">doGetCompte.action</result>
        </action>

        <!-- Action UPDATE PASSWORD -->
        <action name="doUpdatePassword"
                class="com.antazri.climbingclub.webapp.action.CompteUtilisateurAction"
                method="doUpdatePassword">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/user/edit_password.jsp</result>
            <result name="success" type="redirect">doGetCompte.action</result>
            <result name="error" type="redirect">doGetCompte.action</result>
        </action>
    </package>

    <!-- =============================================================== -->
    <!-- Package ADMIN -->
    <!-- =============================================================== -->
    <package name="admin" extends="user" namespace="/admin">
        <!-- Action ACCES ADMIN -->
        <action name="doLoginAdmin">
            <result name="success">/WEB-INF/jsp/admin/admin.jsp</result>
            <result name="error" type="redirectAction">/login/doLogin</result>
        </action>
    </package>
</struts>