<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
        "http://struts.apache.org/dtds/struts-2.5.dtd">

<struts>
    <package name="cclub-default" extends="struts-default" namespace="/">
        <!-- Action INDEX par dÃ©faut -->
        <default-action-ref name="index" />
        <action name="index">
            <result>/WEB-INF/jsp/index.jsp</result>
        </action>

    </package>

    <package name="topos" extends="cclub-default" namespace="/topos">
        <!-- Action TOPOS LIST -->
        <action name="doToposList"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doListAllTopos">

            <result>/WEB-INF/jsp/topos/topos.jsp</result>
        </action>

        <!-- Action TOPO DETAILS -->
        <action name="doTopoDetails"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doTopoDetails">
            <result name="success">/WEB-INF/jsp/topos/topo.jsp</result>
            <result name="error">/WEB-INF/jsp/topos/topos.jsp</result>

            <interceptor-ref name="store">
                <param name="operationMode">RETRIEVE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

        </action>

        <!-- Action ADD TOPO -->
        <action name="doAddTopo"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doAddTopo">

            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/topos/add_topo.jsp</result>
            <result name="success" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topo.topoId}</param>
            </result>
            <result name="error">/WEB-INF/jsp/topos/add_topo.jsp</result>
        </action>

        <!-- Action UPDATE TOPO -->
        <action name="doGetTopoToUpdate"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doGetTopoToUpdate">
            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/topos/update_topo.jsp</result>
            <result name="error" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topo.topoId}</param>
            </result>

        </action>

        <action name="doUpdateTopo"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doUpdateTopo">
            <interceptor-ref name="store">
                <param name="operationMode">STORE</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

            <result name="input">/WEB-INF/jsp/topos/update_topo.jsp</result>
            <result name="success" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topo.topoId}</param>
            </result>
            <result name="error" type="redirectAction">
                <param name="actionName">doTopoDetails</param>
                <param name="topoId">${topo.topoId}</param>
            </result>
        </action>

        <!-- Action UPDATE TOPO -->
        <action name="doDeleteTopo"
                class="com.antazri.climbingclub.webapp.action.GestionTopoAction"
                method="doDeleteTopo">

            <result name="success" type="redirectAction">
                <param name="actionName">doGetCompte</param>
            </result>
            <result name="error" type="redirectAction">
                <param name="actionName">doGetCompte</param>
            </result>
        </action>
    </package>

    <package name="regions" extends="cclub-default" namespace="/regions">
        <!-- Action EN REGION page access -->
        <action name="doRegions">
            <result>/WEB-INF/jsp/regions/regions.jsp</result>
        </action>

    </package>

    <package name="public" extends="cclub-default" namespace="/login">
        <!-- Action LOGIN -->
        <action name="doLogin"
                class="com.antazri.climbingclub.webapp.action.LoginAction"
                method="doLogin">
            <result name="input">/WEB-INF/jsp/login.jsp</result>
            <result name="success" type="redirectAction">/compte/doGetCompte</result>
            <result name="error">/WEB-INF/jsp/login.jsp</result>
        </action>

        <!-- Action LOGOUT -->
        <action name="doLogout"
                class="com.antazri.climbingclub.webapp.action.LoginAction"
                method="doLogout">
            <result type="redirectAction">/login/doLogin</result>
        </action>

        <!-- Action INSCRIPTION -->
        <action name="doGetInscription"
                class="com.antazri.climbingclub.webapp.action.CompteUtilisateurAction"
                method="doGetInscription">
            <result name="success">/WEB-INF/jsp/inscription.jsp</result>
        </action>
        <action name="doInscription"
                class="com.antazri.climbingclub.webapp.action.CompteUtilisateurAction"
                method="doInscription">
            <result name="success" type="redirectAction">/compte/doGetCompte</result>
            <result name="error">/WEB-INF/jsp/inscription.jsp</result>
        </action>
    </package>

    <package name="user" extends="public" namespace="/compte">
        <!-- Action ACCES COMPTE -->
        <action name="doGetCompte"
                class="com.antazri.climbingclub.webapp.action.LoginAction"
                method="doGetCompte">
            <result name="success">/WEB-INF/jsp/user/compte.jsp</result>
            <result name="error" type="redirectAction">/login/doLogin</result>
        </action>
    </package>

    <package name="admin" extends="user" namespace="/admin">
        <!-- Action ACCES ADMIN -->
        <action name="doLoginAdmin">
            <result name="success">/WEB-INF/jsp/admin/</result>
            <result name="error" type="redirectAction">/login/doLogin</result>
        </action>
    </package>
</struts>